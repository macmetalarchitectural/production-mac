<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="document_tax_totals_e3k" inherit_id="account.document_tax_totals">
        <xpath expr="//tr[hasclass('o_subtotal')]" position="replace">
            <tr class="border-black o_subtotal">
                <td class="text-left" colspan='2'>
                    <strong t-esc="subtotal['name']"/>
                    <span
                            t-att-class="oe_subtotal_footer_separator"
                            t-esc="subtotal['formatted_amount']"
                    />
                </td>
            </tr>
        </xpath>
        <xpath expr="//tr[hasclass('o_total')]" position="replace">
            <tr class="border-black o_total">

                <td class="text-left" colspan='2'>
                    <strong>Total:</strong>
                    <span t-esc="tax_totals['formatted_amount_total']"/>
                </td>
            </tr>
        </xpath>
    </template>
    <template id="report_sale_e3k_mac" inherit_id="e3k_default_reports.report_sale_e3k">

        <xpath expr="//p[@t-field='doc.sale_note_termes']" position="replace">
            <br/>
            <br/>
            <div style="border: 1px solid #000; padding: 10px; background-color:#FFFFFF; color: black; font-size: 11px !important;  border-top: 1px solid black;
font-weight: bold; page-break-inside: avoid;">
                <p t-field="doc.sale_note_termes"/>
            </div>
        </xpath>
        <xpath expr="//table[1]/thead/tr//th[@name='th_description']" position="replace">
            <th name="th_description" class="text-left">Description</th>

        </xpath>

        <xpath expr="//table[1]/thead/tr//th[@name='th_ref']" position="replace">
            <th name="th_ref" class="text-left" t-if="check_is_default_code">Product No.</th>

        </xpath>

        <xpath expr="//div[@id='total']" position="replace">
            <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                <div id="total" class="row" name="total">
                    <div t-attf-class="#{'row' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">

                        <div class="col-7">
                            <table class="table" style="font-weight: bold; !important">
                                <tr>
                                    <td style="background-color:#FFFFFF; color: black; font-size: 11px !important;"
                                        colspan="2">
                                        ATTENTION PLEASE VERIFY YOUR MEASUREMENTS.
                                        NO CHANGES WILL BE POSSIBLE WHEN THE ORDER IS APPROVED.
                                    </td>
                                </tr>
                                <tr>
                                    <td style="background-color:#FFFFFF; color: black" colspan="2">
                                        Signature to start production :
                                        ................................................
                                    </td>
                                </tr>

                                <tr>
                                    <td style="background-color:#FFFFFF; color: black" colspan="2">
                                        Date : ................................................
                                    </td>
                                </tr>
                                <tr style="border-top: 1px solid black; font-size: 11px !important;">
                                    <td style="background-color:#FFFFFF; color: black; height: 60px; width: 100px">
                                        COMMENTS :
                                    </td>
                                    <td style="background-color:#FFFFFF; color: black; height: 60px">
                                        <p t-field="doc.delivery_note"/>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-5">
                            <table class="table table-sm">
                                <!-- Tax totals -->
                                <t t-set="tax_totals" t-value="json.loads(doc.tax_totals_json)"/>
                                <t t-call="account.document_tax_totals"/>
                            </table>
                        </div>

                    </div>
                </div>
            </t>
            <t t-else="">
                <div id="total" class="row" name="total">
                    <div t-attf-class="#{'col-5' if report_type != 'html' else 'col-sm-7 col-md-5'} ml-auto">
                        <table class="table table-sm">
                            <!-- Tax totals -->
                            <t t-set="tax_totals" t-value="json.loads(doc.tax_totals_json)"/>
                            <t t-call="account.document_tax_totals"/>
                        </table>
                    </div>
                </div>

            </t>
        </xpath>
        <xpath expr="//p[@t-if='not is_html_empty(doc.payment_term_id.note)']" position="replace">
        </xpath>
        <xpath expr="//div[@t-if='doc.commitment_date']" position="replace">
        </xpath>
        <xpath expr="//p[@t-field='doc.note']" position="replace">
        </xpath>

        <xpath expr="//div[@t-if='doc.user_id.name']" position="replace">
            <div t-if="doc.user_id.name"
                 class="col-auto col-3 mw-100 mb-2">
                <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                    <strong>Salesperson:</strong>
                    <p class="m-0" t-field="doc.user_id"/>
                </t>
            </div>
            <div t-if="doc.x_studio_inside_sales_rep" class="col-auto col-3 mw-100 mb-2">
                <strong class="text-nowrap">Inside sales rep:</strong>
                <p class="m-0" t-field="doc.x_studio_inside_sales_rep"/>
            </div>
        </xpath>
    </template>
</odoo>